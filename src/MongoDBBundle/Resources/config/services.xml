<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>
        <!-- Default configuration for services in *this* file -->
        <defaults autowire="true" autoconfigure="true"/>

        <service id="MongoDB\Bundle\Command\DebugCommand">
            <argument type="tagged_locator" tag="mongodb.client" />

            <tag name="console.command" />
        </service>

        <service id="mongodb.prototype.client" class="MongoDB\Client">
            <argument key="$uri" type="abstract">Should be defined by pass</argument>
            <argument key="$uriOptions" type="abstract">Should be defined by pass</argument>
            <argument key="$driverOptions" type="abstract">Should be defined by pass</argument>

            <tag name="mongodb.client" />
        </service>

        <service id="mongodb.metadata.codec_guesser" class="MongoDB\Bundle\Metadata\CodecGuesser" />

        <service id="mongodb.metadata.document_metadata_factory" class="MongoDB\Bundle\Metadata\DocumentMetadataFactory">
            <argument key="$codecGuesser" type="service" id="mongodb.metadata.codec_guesser" />
        </service>

        <service id="mongodb.codec.mapped_document_codec_factory" class="MongoDB\Bundle\Codec\MappedDocumentCodecFactory">
            <argument key="$metadataFactory" type="service" id="mongodb.metadata.document_metadata_factory" />
        </service>
    </services>
</container>
